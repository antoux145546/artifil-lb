<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Loading...</title>

  <!-- fallback -->
  <meta http-equiv="refresh" content="8; url=index.html">

  <style>
    *{ box-sizing:border-box; margin:0; padding:0; }

    :root{
      /* Burger plus grand */
      --burgerW: clamp(240px, 34vw, 480px);
      --burgerH: calc(var(--burgerW) * 0.70);
    }

    body{
      min-height:100vh;
      display:grid;
      place-items:center;
      background:#ffffff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    .loader{ text-align:center; }

    .burger{
      width:var(--burgerW);
      height:var(--burgerH);
      position:relative;
      margin:0 auto;
    }

    .ingredient{
      position:absolute;
      left:50%;
      opacity:0;
      transform: translate(-50%, calc(var(--burgerH) * -1.2));
      filter: drop-shadow(0 5px 5px rgba(0,0,0,.08));
    }

    .ingredient.animate{
      animation: drop .55s ease-out forwards;
    }

    @keyframes drop{
      from{
        opacity:0;
        transform: translate(-50%, calc(var(--burgerH) * -1.2));
      }
      to{
        opacity:1;
        transform: translate(-50%, 0);
      }
    }

    /* ===== COUCHES ===== */
    .bun-top{
      top: 0%;
      width:100%;
      height: 46%;
      background:#f2b36c;
      border-radius: 999px 999px 60px 60px;
    }

    .seeds{ position:absolute; inset:0; }
    .seed{
      position:absolute;
      width: calc(var(--burgerW) * 0.045);
      height: calc(var(--burgerW) * 0.025);
      background:#fff;
      border-radius:999px;
      opacity:.8;
    }

    .tomato{
      top: 43%;
      width:100%;
      height: 6%;
      background:#e53935;
      border-radius:999px;
    }

    .lettuce{
      top: 49%;
      width:100%;
      height: 8%;
      background:#43a047;
      border-radius:999px;
    }

    .cheese{
      top: 56%;
      width:100%;
      height: 8%;
      background:#ffca28;
      border-radius:999px;
    }

    .cheese::after{
      content:"";
      position:absolute;
      right: 18%;
      top: 45%;
      width: 7%;
      height: 60%;
      background:#ffca28;
      border-radius:0 0 999px 999px;
    }

    .meat{
      top: 64%;
      width:100%;
      height: 12%;
      background:#4e342e;
      border-radius:999px;
    }

    .bun-bottom{
      top: 76%;
      width:100%;
      height: 24%;
      background:#f2b36c;
      border-radius: 40px 40px 999px 999px;
    }

    /* ===== LOADING + DOTS ANIMÉS ===== */
    .loading{
      margin-top: calc(var(--burgerH) * 0.12);
      font-weight:800;
      letter-spacing:.28em;
      font-size: clamp(14px, 3vw, 20px);
      color:#111;
      display:flex;
      justify-content:center;
      align-items:baseline;
      gap: 6px;
    }

    /* On réserve de la place pour éviter que le texte bouge */
    .dots{
      display:inline-block;
      width: 1.6em;          /* réserve l’espace pour "..." */
      letter-spacing: 0;     /* pas d’espacement sur les points */
      text-align:left;
      font-weight:800;
    }
  </style>
</head>

<body>
  <div class="loader">
    <div class="burger">
      <div class="ingredient bun-bottom" data-i="bunBottom"></div>
      <div class="ingredient meat" data-i="meat"></div>
      <div class="ingredient cheese" data-i="cheese"></div>
      <div class="ingredient lettuce" data-i="lettuce"></div>
      <div class="ingredient tomato" data-i="tomato"></div>

      <div class="ingredient bun-top" data-i="bunTop">
        <div class="seeds">
          <div class="seed" style="left:22%;top:32%"></div>
          <div class="seed" style="left:40%;top:26%"></div>
          <div class="seed" style="left:58%;top:34%"></div>
          <div class="seed" style="left:72%;top:28%"></div>
        </div>
      </div>
    </div>

    <div class="loading">
      <span>LOADING</span><span class="dots" id="dots">...</span>
    </div>
  </div>

  <script>
    const wait = ms => new Promise(r => setTimeout(r, ms));
    const order = ["bunBottom","meat","cheese","lettuce","tomato","bunTop"];
    const items = document.querySelectorAll(".ingredient");

    // ✅ Animation des points: ".", "..", "..."
    const dotsEl = document.getElementById("dots");
    let d = 0;
    const dotsTimer = setInterval(() => {
      d = (d + 1) % 4;          // 0..3
      dotsEl.textContent = ".".repeat(d);
    }, 350);

    async function play(){
      items.forEach(i=>{
        i.classList.remove("animate");
        i.style.opacity=0;
        i.style.transform=`translate(-50%, calc(var(--burgerH) * -1.2))`;
      });

      void document.body.offsetWidth;

      for(const key of order){
        document.querySelector(`[data-i="${key}"]`).classList.add("animate");
        await wait(220);
      }

      await wait(1200);

      // stop dots interval before redirect (optional)
      clearInterval(dotsTimer);

      window.location.href="index.html";
    }

    play();
  </script>
</body>
</html>